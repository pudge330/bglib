/*! @license
 *
 * bglib v1.0
 * https://github.com/pudge330/bglib
 *
 * Copyright 2019
 * Released under the MIT license
 * https://github.com/pudge330/bglib/blob/master/LICENSE
 */
/*! @license
 * 
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 * https://github.com/js-cookie/js-cookie/blob/master/LICENSE
 */
!function(e,t){var n,r;"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():(n=e.bglib,(r=e.bglib=t()).noConflict=function(){return e.bglib=n,r})}(window,function(){var jQuery="undefined"!==window.jQuery?window.jQuery:null,_bglib={name:"bglib",version:"1.0",modules:{}},bglib=function(){};return bglib.fn={},bglib.getName=function(){return _bglib.name},bglib.getVersion=function(){return _bglib.version},bglib.fn.call=function(e,t){return e.apply(null,t)},Date.getMonthName||(Date.label={month:["January","February","March","April","May","June","July","August","September","October","November","December"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Date.label.month.abbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.label.day.abbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.getMonthName=function(e,t){return 12<e?e=12:e<1&&(e=1),e-=1,((t=t||!1)?Date.label.month.abbr:Date.label.month)[e]}),Date.getMonthIndex||(Date.getMonthIndex=function(e){e=e.toLowerCase().uppercaseFirst();var t=Date.label.month.indexOf(e);return-1!==(t=-1===t?Date.label.month.abbr.indexOf(e):t)?t+1:null}),Date.getDayName||(Date.getDayName=function(e,t){return 7<e?e=7:e<1&&(e=1),e-=1,((t=t||!1)?Date.label.day.abbr:Date.label.day)[e]}),Date.getDayIndex||(Date.getDayIndex=function(e){e=e.toLowerCase().uppercaseFirst();var t=Date.label.day.indexOf(e);return-1!==(t=-1===t?Date.label.day.abbr.indexOf(e):t)?t+1:null}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.uppercaseFirst||(String.prototype.uppercaseFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),String.prototype.lowercaseFirst||(String.prototype.lowercaseFirst=function(){return this.charAt(0).toLowerCase()+this.slice(1)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.concatUnique||(Array.prototype.concatUnique=function(e){for(var t=0;t<e.length;t++)-1===this.indexOf(e[t])&&this.push(e[t]);return this}),Array.prototype.pushUnique||(Array.prototype.pushUnique=function(e){return-1===this.indexOf(e)&&this.push(e),this}),window.isObject||(window.isObject=function(e){return null!==e&&("function"==typeof e||"object"==typeof e)}),Object.isObject||(Object.isObject=window.isObject),Object.copy||(Object.copy=function(e){var t;return null===e||"object"!=typeof e?e:(t=e.constructor(),Object.assign(t,e))}),Object.copyMerge||(Object.copyMerge=function(e,t){return Object.assign(Object.copy(e),t)}),Object.deepMerge||(Object.deepMerge=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)return{};for(var t=!1,n=(2<e.length&&!0===e[e.length-1]&&(t=!0,e.pop()),t?Object.assign({},e.shift()):e.shift()),r=0;r<e.length;r++)for(var a in e[r])e[r].hasOwnProperty(a)&&(Object.isObject(e[r][a])&&!Array.isArray(e[r][a])&&n.hasOwnProperty(a)&&Object.isObject(n[a])?n[a]=Object.deepMerge(n[a],e[r][a],!0):Array.isArray(e[r][a])&&n.hasOwnProperty(a)&&Array.isArray(n[a])?n[a]=n[a].concat(e[r][a]):(Object.isObject(e[r][a])&&(e[r][a]=Object.assign({},e[r][a])),n[a]=e[r][a]));return n}),Object.deepCopyMerge||(Object.deepCopyMerge=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)return{};for(var t=Object.assign({},e.shift()),n=0;n<e.length;n++)for(var r in e[n])e[n].hasOwnProperty(r)&&(Object.isObject(e[n][r])&&!Array.isArray(e[n][r])&&t.hasOwnProperty(r)&&Object.isObject(t[r])?t[r]=Object.deepCopyMerge(t[r],e[n][r]):Array.isArray(e[n][r])&&t.hasOwnProperty(r)&&Array.isArray(t[r])?t[r]=t[r].concat(e[n][r]):(Object.isObject(e[n][r])&&(e[n][r]=Object.assign({},e[n][r])),t[r]=e[n][r]));return t}),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=o.length;return function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)a.call(e,t)&&r.push(t);if(i)for(n=0;n<s;n++)a.call(e,o[n])&&r.push(o[n]);return r}}()),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},writable:!0,configurable:!0}),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,n){var r,a=this[t];delete this[t]&&Object.defineProperty(this,t,{get:function(){return a},set:function(e){return r=a,a=n.call(this,t,r,e)},enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}}),JSON.safeParse||(JSON.safeParse=function(t){if(null===t)return null;try{t=JSON.parse(t)}catch(e){t=null}return t}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(document.documentElement.contains(this))do{if(t.matches(e))return t}while(null!==(t=t.parentElement));return null}),Function.prototype.bind||function(){var r=Array.prototype.slice;Function.prototype.bind=function(){var e=this,t=arguments[0],n=r.call(arguments,1);if("function"!=typeof e)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){return n.push.apply(n,arguments),e.apply(t,n)}}}(),bglib.extend=function(e,t,n){return bglib.DT.isString(e)?(t=t||{},n=n||{},_bglib.modules.hasOwnProperty(e=e||"Base")||(e="Base"),_bglib.modules[e].extend(t,n)):bglib.extend(n||"Base",e||{},t||{})},bglib.module=function(e){if(_bglib.modules.hasOwnProperty(e))return _bglib.modules[e]},bglib.create=function(name){if(_bglib.modules.hasOwnProperty(name)){for(var args=Array.prototype.slice.call(arguments),argsDef=(args.shift(),""),i=0;i<args.length;i++)argsDef+=(""===argsDef?"":", ")+"args["+i+"]";return eval("new _bglib.modules[name]("+argsDef+")")}},bglib.noop=function(){},bglib.setRegisteredModule=function(e,t){_bglib.modules[e]=t},bglib.fn.debounce=function(n,r){var a;return function(){var e=this,t=arguments;clearTimeout(a),a=setTimeout(function(){n.apply(e,t)},r)}},bglib.fn.throttle=function(t,n){function r(){null==i?a=!1:(t.apply(this,i),i=null,setTimeout(r,n))}var a=!1,i=null;return function(){var e=arguments;a?i=e:(t.apply(this,e),a=!0,setTimeout(r,n))}},function(e){"use strict";e=e||window;var n=[],r=!1,a=!1;function i(){if(!r){r=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function o(){"complete"===document.readyState&&i()}e.documentReady=function(e,t){if("function"!=typeof e)throw new TypeError("callback for docReady(fn) must be a function");r?setTimeout(function(){e(t)},1):(n.push({fn:e,ctx:t}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(i,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",i)),a=!0))}}(bglib.fn),bglib.fn.toEm=function(e,t){t=t||document.querySelector("body"),e=parseInt(e,10);var n=document.createElement("div"),t=(n.innerHTML="&nbsp;",bglib.El.css(n,{"font-size":"1em",margin:0,padding:0,height:"auto","line-height":1,border:0}),t.appendChild(n),parseFloat(bglib.El.css(n,"height")));return bglib.El.remove(n),((e/t).toFixed(8)+"").replace(/0+$/,"").replace(/\.$/,"")+"em"},bglib.fn.toPx=function(e,t){t=t||document.querySelector("body"),e=parseFloat(e);var n=document.createElement("div"),t=(n.innerHTML="&nbsp;",bglib.El.css(n,{"font-size":"1em",margin:0,padding:0,height:"auto","line-height":1,border:0}),t.appendChild(n),parseFloat(bglib.El.css(n,"height")));return bglib.El.remove(n),Math.round(e*t)+"px"},bglib.fn.formatDecimal=function(e,t){return t=t||2,"string"==typeof(e=e&&"0"!==e?e:0)&&(e=e.replace(/[^\d\.]/g,"")),parseFloat(Math.round(100*e)/100).toFixed(t)},bglib.fn.formatPrice=function(e){return bglib.DT.isString(e)&&(e=parseFloat(e.replace(/[^\d\.]/g,""))),window.Intl&&Intl.NumberFormat?new Intl.NumberFormat("en-US",{roundingMode:"ceil",currency:"USD",style:"currency"}).format(e):"$"+bglib.fn.formatDecimal(e,2)},bglib.fn.formatPriceNumeric=function(e){return bglib.fn.formatPrice(e).replace(/[^\d\.]/g,"")},bglib.fn.htmlEntities=function(e){return(e=e.replace(/[\'\"\&]/gim,function(e){return"'"==e?"&#039;":'"'==e?"&quot;":"&"==e?"&amp;":void 0})).replace(/[\u00A0-\u9999<>]/gim,function(e){if(-1===["'",'"',"&"].indexOf(e))return"&#"+e.charCodeAt(0)+";"})},bglib.fn.interpolate=function(e,t){for(var n in t)e=e.replace(new RegExp("{{"+n+"}}","gm"),t[n]);return e},bglib.fn.iosVersion=function(){var e;return/iP(hone|od|ad)/.test(navigator.platform)?(e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]):null},bglib.fn.rand=function(e){return e=e||1e8,Math.floor(Math.random()*e+1)},bglib.fn.compileTemplate=function(e,t){for(var n,r,a=[],i=-1;n=e.match(/(\<\%(.*|[\s\S]+?)\%\>?)/);)r="##__jct__"+ ++i+"__"+bglib.fn.rand()+"__##",a.push([r,n[2].trim()]),e=e.replace(/(\<\%(.*|[\s\S]+?)\%\>?)/,r);for(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\\\'/g,"\\\\'")).replace(/\'/g,"\\'")).replace(/\{\{\{/g,"' + helpers.htmlEntities(")).replace(/\}\}\}/g,") + '")).replace(/\{\{/g,"' + ")).replace(/\}\}/g," + '")).replace(/\<\*/g,"'; /*")).replace(/\*\>/g,"*/ __bglib_template__ += '")).replace(/\{\\\{\\\{/g,"{{{")).replace(/\}\\\}\\\}/g,"}}}")).replace(/\{\\\{/g,"{{")).replace(/\}\\\}/g,"}}")).replace(/\<\\\*/g,"<*")).replace(/\*\\\>/g,"*>")).replace(/\<\\\%/g,"<%")).replace(/\%\\\>/g,"%>")).replace(/\r\n/g,"\n")).replace(/\n/g,"';\n__bglib_template__ += '");n=e.match(/(\/\*(.*|[\s\S]+?)\*\/)/);)e=e.replace(/(\/\*(.*|[\s\S]+?)\*\/)/,"");for(var o=0;o<a.length;o++)e=e.replace(a[o][0],"'; "+a[o][1]+"  __bglib_template__ += '");for(;n=e.match(/for\s*\(\s*([a-zA-Z_][a-zA-Z0-9_]*)\s+in\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*\)\s*\{/);){var s=n[1]+"Index",s="for (var "+s+" = 0; "+s+" < "+n[2]+".length; "+s+"++) { var "+n[1]+" = "+n[2]+"["+s+"];";e=e.replace(/for\s*\(\s*[a-zA-Z_][a-zA-Z0-9_]*\s+in\s+[a-zA-Z_][a-zA-Z0-9_]*\s*\)\s*\{/,s)}return"var __bglib_template__ = '"+(e=(e=e.replace(/__bglib_template__ \+\= '';/gm,"")).replace(/__bglib_template__ \+\= '\s+';/gm,""))+"';"},bglib.fn.renderTemplate=function(tpl,data){for(var helpers=bglib.fn.renderTemplate.helpers,format=bglib.fn.renderTemplate.format,fn=bglib.fn.renderTemplate.fn,data=data||{},dataKeys=Object.keys(data),tpl1="",i=0;i<dataKeys.length;i++)-1===["helpers","format","fn","data"].indexOf(dataKeys[i])&&dataKeys[i].match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)&&(tpl1+="var "+dataKeys[i]+" = this."+dataKeys[i]+";");return tpl=tpl1+(tpl.match(/^var __bglib_template__ = \'/)?tpl:bglib.fn.compileTemplate(tpl,Object.keys(data))),function(){return eval(tpl),__bglib_template__}.call(data)},bglib.fn.renderTemplate.helpers={},bglib.fn.renderTemplate.helpers.htmlEntities=bglib.fn.htmlEntities,bglib.fn.renderTemplate.helpers.rand=bglib.fn.rand,bglib.fn.renderTemplate.helpers.toEm=bglib.fn.toEm,bglib.fn.renderTemplate.helpers.toPx=bglib.fn.toPx,bglib.fn.renderTemplate.helpers.dt=bglib.DT,bglib.fn.renderTemplate.format={},bglib.fn.renderTemplate.format.camelCase=bglib.fn.toCamelCase,bglib.fn.renderTemplate.format.properCase=bglib.fn.toProperCase,bglib.fn.renderTemplate.format.decimal=bglib.fn.formatDecimal,bglib.fn.renderTemplate.format.price=bglib.fn.formatPrice,bglib.fn.renderTemplate.fn={},bglib.fn.request=function(e,t,n,r){n=n||{};var a="GET"!==(r=r||"GET"),i=(t=t||bglib.noop,t=bglib.DT.isFunction(t)?{success:t,error:bglib.noop,always:bglib.noop}:Object.assign({success:bglib.noop,error:bglib.noop,always:bglib.noop},t),new XMLHttpRequest);i.open(r,e,!0),i.addEventListener("readystatechange",function(){4==i.readyState&&200==i.status?t.success(i.responseText,i,n):t.error(i.responseText,i,n),t.always(i.responseText,i,n)},!1),a?(i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify(n))):i.send()},bglib.fn.toCamelCase=function(e){for(var t=e.split("-"),n=t.shift();t.length;)n+=t[0].uppercaseFirst(),t.shift();return n},bglib.fn.toProperCase=function(e){return bglib.fn.toCamelCase(e).uppercaseFirst()},function(e){function t(){}t.extend=function(e,t){t=t||{};var n=this,r=(e=e||{})&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)};return r=Object.assign(r,n),(r=Object.assign(r,t)).prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object.assign(r.prototype,e),r.__parent=n,r},e.BaseModule=t.extend({constructor:function(){t.apply(this,arguments),this.init&&this.init.apply(this,arguments)}}),e.setRegisteredModule("Base",e.BaseModule)}(bglib),bglib.AppRouter=bglib.BaseModule.extend({routes:void 0,init:function(e){this.routes={},void 0!==e&&(e=Object.deepCopyMerge({},e),this.setRoutes(e))},processRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs={keys:[],obj:{},arr:[]},e.pattern=e.pattern.replace(/\/+$/,""),""==e.pattern&&(e.pattern="/"),e.compiledRegex=this.compileRoute(e,e.pattern,e.defaults,e.requirements),e},compileRoute:function(e,t,n,r){var a,i=t.match(/({([^\/{}]+)})/g),o={};if(i)for(var s=0;s<i.length;s++){var l=i[s],u=(i[s]=i[s].replace(/^({)|(})$/g,""),"([^\\/?#]+)");void 0!==r[i[s]]&&(u="("+r[i[s]]+")"),l="\\{"+i[s]+"\\}",e.defaultSlugs.keys.push(i[s]),void 0!==n[i[s]]?(e.defaultSlugs.obj[i[s]]=n[i[s]],e.defaultSlugs.arr.push(n[i[s]]),s==i.length-1&&(u="(?:\\/"+u+"|\\/)?",l="\\/"+l),delete e.defaults[i[s]]):(e.defaultSlugs.obj[i[s]]=void 0,e.defaultSlugs.arr.push(void 0)),o[l]=u}for(a in t=this.regexEscape(t),o)o.hasOwnProperty(a)&&(t=t.replace(a,o[a]));return t="^"+t+"$",new RegExp(t)},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},setRoutes:function(e){for(var t in this.routes=e,this.routes)this.routes.hasOwnProperty(t)&&(this.routes[t]=this.processRoute(this.routes[t]))},addRoute:function(e,t,n){this.routes[e]=t,void 0!==n&&(this.routes[e].action=n),this.routes[e]=this.processRoute(this.routes[e])},addRoutes:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.routes[t]=e[t],this.routes[t]=this.processRoute(this.routes[t]))},match:function(e){for(var t in""==(e=e.replace(/\/+$/,""))&&(e="/"),this.routes)if(this.routes.hasOwnProperty(t)){var n=e.match(this.routes[t].compiledRegex);if(n){for(var r={obj:Object.copy(this.routes[t].defaultSlugs.obj),arr:this.routes[t].defaultSlugs.arr.slice()},a=0;a<r.arr.length;a++)void 0!==n[a+1]&&(r.obj[this.routes[t].defaultSlugs.keys[a]]=n[a+1],r.arr[a]=n[a+1]);return{action:this.routes[t].action,slugs:r,defaults:Object.copy(this.routes[t].defaults)}}}return null}}),function(e){var i=e.BaseModule,t=i.extend({__propagationStopped:void 0,__defaultPrevented:void 0,__eventProps:void 0,data:void 0,name:void 0,constructor:function(e,t,n,r){for(var a in i.apply(this,arguments),this.__propagationStopped=!1,this.__defaultPrevented=!1,this.name=e||"UnsetEventName",this.data=n||{},this.__eventProps=t=t||{})t.hasOwnProperty(a)&&(this[a]=t[a]);r&&(this.originalEvent=r)},getEventProps:function(){return this.__eventProps},stopPropagation:function(){this.__propagationStopped=!0},isPropagationStopped:function(){return this.__propagationStopped},preventDefault:function(){void 0!==this.originalEvent?this.originalEvent.preventDefault():this.__defaultPrevented=!0},isDefaultPrevented:function(){return void 0!==this.originalEvent?this.originalEvent.defaultPrevented:this.__defaultPrevented}});e.Event=t}(bglib),function(o){var e=o.BaseModule,l=o.Event,t=e.extend({__moduleEvents:void 0,constructor:function(){this.__moduleEvents={},e.apply(this,arguments)},on:function(){var a=this,e=this.resolveArguments("on",arguments),t=e[0],n=e[1],r=e[2];t=""!=t?t.split(" "):[];for(var i=0;i<t.length;i++){var o=t[i].trim(),s=(this.__moduleEvents.hasOwnProperty(o)||(this.__moduleEvents[o]={name:o,fn:function(){},handlers:new Map,data:new Map},this.__moduleEvents[o].fn=function(n,r){return n.handlers.forEach(function(e,t){r.isPropagationStopped()||e&&(e=(e=n.data.get(t))||{},e=new l(t.name,r.getEventProps(),e),t.callback.bind(a)(e),e.isPropagationStopped()&&r.stopPropagation(),e.isDefaultPrevented())&&r.preventDefault()}),r.isDefaultPrevented()}.bind(this,this.__moduleEvents[o])),{name:o,callback:r});this.__moduleEvents[o].handlers.set(s,!0),this.__moduleEvents[o].data.set(s,n)}},off:function(){var e=this.resolveArguments("off",arguments),t=e[0],n=e[1],r=e[2];t=""!=t?t.split(" "):[];for(var a=0;a<t.length;a++){var i,o=t[a],s=o,l=n;this.__moduleEvents[o].handlers.forEach(function(e,t){i||s!=t.name||l!=t.callback||(i=t)}),i&&(r?this.__moduleEvents[o].handlers.set(i,!1):(this.__moduleEvents[o].handlers.delete(i),this.__moduleEvents[o].data.delete(i)))}},trigger:function(e,t){return t instanceof l||(t=new l(e,t)),e in this.__moduleEvents&&this.__moduleEvents[e].fn(t)},hasHandlers:function(e){return!(!this.__moduleEvents.hasOwnProperty(e)||!this.__moduleEvents[e].handlers.size)},resolveArguments:function(e,arguments){var t,n,r,a=[].slice.call(arguments),i=a.shift();if("on"===e)switch(a.length){case 2:t=a[0],n=a[1];break;case 1:o.DT.isFunction(a[0])&&(n=a[0])}else{switch(a.length){case 2:r=a[0],n=a[1];break;case 1:o.DT.isFunction(a[0])&&(n=a[0])}o.DT.isFunction(a[0])&&(n=a[0])}return n=n||function(){},r=void 0!==r&&r,i=(i=i.trim())?i.replace(/(\s{2,})/," "):"","on"===e?[i,t,n]:[i,n,r]}});o.EventModule=t,o.setRegisteredModule("Event",t)}(bglib),function(e){var n=e.EventModule,r=n.extend({dataSet:void 0,dataSetState:void 0,constructor:function(){n.apply(this,arguments);var e,t=arguments[0]||[];t.onChange&&this.on("change",t.onChange),t.data&&Array.isArray(t.data)?(e=t.clone||!1,this.dataSet=e?t.data.slice(0):t.data):this.dataSet=[],this.dataSetState=new Array(this.dataSet.length).fill(!0),this.triggerChange("set")},getData:function(){var n=this;return this.dataSet.filter(function(e,t){return!!n.dataSetState[t]})},triggerChange:function(e){this.trigger("change",{caller:this,dataSet:this.getData(),type:e})},setData:function(e,t){return this.dataSet=(t=t||!1)?e.slice(0):e,this.dataSetState=new Array(this.dataSet.length).fill(!0),this},determineSort:function(e){return e=e.toLowerCase(),Array.isArray(e)?e:-1!==["desc",">"].indexOf(e)?"desc":"asc"},sort:function(e){for(var i=[],t=0;t<e.length;t++){var n=null,r=null;"string"==typeof e[t]?(n=e[t],r="asc"):Array.isArray(e[t])?(n=e[t][0],r=this.determineSort(e[t][1])):Object.isObject(e[t])&&(n=e[t].name,r=e[t].dir,r=this.determineSort(r)),n&&i.push({name:n,dir:r})}return this.dataSet.sort(function(e,t){for(var n=0;n<i.length;n++){var r=i[n];if(Array.isArray(r.dir)){var a=r.dir(e[r.name],t[r.name]);if(-1!==[-1,1].indexOf(a))return a}else{if(e[r.name]>t[r.name])return"asc"===r.dir?1:-1;if(e[r.name]<t[r.name])return"asc"===r.dir?-1:1}}return 0}),this.triggerChange("sort"),this},determineFilterType:function(e){return e=e.toLowerCase(),-1!==["equals","equal","="].indexOf(e)?"equals":-1!==["!equals","!equal","!=","<>"].indexOf(e)?"not-equals":-1!==["contains","contain","has"].indexOf(e)?"contains":-1!==["!contains","!contain","!has"].indexOf(e)?"not-contains":-1!==["<","less-than","lessthan","less"].indexOf(e)?"less-than":-1!==[">","greater-than","greaterthan","greater"].indexOf(e)?"greater-than":-1!==["starts-with","starts","^"].indexOf(e)?"starts-with":-1!==["ends-with","ends","$"].indexOf(e)?"ends-with":-1!==["regex"].indexOf(e)?"regex":-1!==["function","func"].indexOf(e)?"function":"equals"},detemineFilterGlue:function(e){return e=e.toLowerCase(),1===["and","&"].indexOf(e)&&1!==["or","||","|"].indexOf(e)?"or":"and"},filter:function(e,t){t=t||!1;for(var s=this,l=(s.reset(),{and:[],or:[]}),n=0;n<e.length;n++){var r=null,a=null,i=null,o=null;if(Array.isArray(e[n]))switch(e[n].length){case 4:r=e[n][0],a=e[n][1],i=this.determineFilterType(e[n][2]),o=this.detemineFilterGlue(e[n][3]);break;case 3:r=e[n][0],a=e[n][1],i=this.determineFilterType(e[n][2]),o="and";break;default:r=e[n][0],a=e[n][1],i="equals",o="and"}else Object.isObject(e[n])&&(r=e[n].name,a=e[n].value,i=e[n].type||"equals",o=e[n].glue||"and");r&&("or"==o?l.or:l.and).push({name:r,value:a,type:i,glue:o})}var u=this.dataSet.filter(function(e,t){var n,r=!0;for(n in l)if(l.hasOwnProperty(n))for(var a=0;a<l[n].length;a++){var i=l[n][a];switch(i.type){case"not-equals":e[i.name]==i.value&&(r=!1,"and"==n)&&(a=l[n].length);break;case"contains":-1===e[i.name].indexOf(i.value)&&(r=!1,"and"==n)&&(a=l[n].length);break;case"not-contains":-1!==e[i.name].indexOf(i.value)&&(r=!1,"and"==n)&&(a=l[n].length);break;case"less-than":e[i.name]<i.value&&(r=!1,"and"==n)&&(a=l[n].length);break;case"greater-than":e[i.name]>i.value&&(r=!1,"and"==n)&&(a=l[n].length);break;case"starts-width":e[i.name].substring(0,i.value.length)!=i.value&&(r=!1,"and"==n)&&(a=l[n].length);break;case"ends-with":e[i.name].substring(e[i.name]-i.value.length,e[i.name].length)!=i.value&&(r=!1,"and"==n)&&(a=l[n].length);break;case"regex":var o=i.flags||"",o=new RegExp(i.value,o);e[i.name].match(o)||(r=!1,"and"==n&&(a=l[n].length));break;case"func":Array.isArray(i.value)&&!1!==i.value(e[i.name])||(r=!1,"and"==n&&(a=l[n].length));break;default:e[i.name]!=i.value&&(r=!1,"and"==n)&&(a=l[n].length)}}return r||(s.dataSetState[t]=!1),r});return this.triggerChange("filter"),t?u:this},reset:function(){return this.dataSetState=new Array(this.dataSet.length).fill(!0),this.triggerChange("reset"),this}},{sort:function(e,t){return new r({data:e,clone:!0}).sort(t).getData()},filter:function(e,t){return new r({data:e,clone:!0}).filter(t,!0)},filterSort:function(e,t,n){e=new r({data:e,clone:!0});return e.setData(e.filter(t,!0)).sort(n).getData()}});e.DatasetModule=r,e.setRegisteredModule("Dataset",r),r.extend({getFoo:function(){return"foo"}},{getFooStatic:function(){return"foo"}})}(bglib),bglib.DT={isString:function(e){return"string"==typeof e||e instanceof String},isFinite:function(e){return"undefined"!=typeof isFinite?isFinite(e):"number"==typeof e},isNumber:function(e){return"number"==typeof e&&this.isFinite(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isObject:function(e){return!1!==e&&("function"==typeof e||"object"==typeof e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isBool:function(e){return"boolean"==typeof e},isRegExp:function(e){return e&&"object"==typeof e&&e.constructor===RegExp},isError:function(e){return e instanceof Error&&void 0!==e.message},isDate:function(e){return e instanceof Date}},bglib.EventUtil={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},function(o){var u=o.Event,c=o.EventUtil;o.EventManager=o.extend({target:void 0,attached:void 0,init:function(e){this.target=e,this.attached={}},resolveArguments:function(e,arguments){var t,n,r,a=[].slice.call(arguments),i=a.shift();if("on"===e)switch(a.length){case 3:t=a[0],n=a[1],r=a[2];break;case 2:o.DT.isString(a[0])?t=a[0]:n=a[0],r=a[1];break;case 1:o.DT.isFunction(a[0])&&(r=a[0])}else switch(a.length){case 3:t=a[0],r=a[1],cache=a[2];break;case 2:o.DT.isString(a[0])?(t=a[0],r=a[1]):o.DT.isFunction(a[0])&&(r=a[0],cache=a[1]);break;case 1:o.DT.isFunction(a[0])&&(r=a[0])}return t=t||null,r=r||function(){},cache="undefined"!=typeof cache&&cache,i=(i=i.trim())?i.replace(/(\s{2,})/," "):"","on"===e?[i,t,n,r]:[i,t,r,cache]},on:function(){var i=this,e=this.resolveArguments("on",arguments),t=e[0],n=e[1],r=e[2],a=e[3];t=""!=t?t.split(" "):[];for(var o=0;o<t.length;o++){var s=t[o].trim(),l=(this.attached.hasOwnProperty(s)||(this.attached[s]={name:s,fn:function(){},handlers:new Map,data:new Map},this.attached[s].fn=function(r,e){var a=new u(s,{target:i.target},{},e);r.handlers.forEach(function(e,t){var n;a.isPropagationStopped()||e&&(e=r.data.get(t),e=new u(s,{target:i.target},e=e||{},a.originalEvent),t.selector?e.originalEvent.target.matches(t.selector)?(t.callback.bind(e.originalEvent.target)(e),e.isPropagationStopped()&&a.stopPropagation()):(n=e.originalEvent.target.closest(t.selector))&&(t.callback.bind(n)(e),e.isPropagationStopped())&&a.stopPropagation():(t.callback.bind(i.target)(e),e.isPropagationStopped()&&a.stopPropagation()))})}.bind(this.target,this.attached[s]),c.addHandler(this.target,s,this.attached[s].fn)),{name:s,selector:n,callback:a});this.attached[s].handlers.set(l,!0),this.attached[s].data.set(l,r)}},off:function(){var e=this.resolveArguments("off",arguments),t=e[0],n=e[1],r=e[2],a=e[3];t=""!=t?t.split(" "):[];for(var i=0;i<t.length;i++){var o,s=t[i],l=s,u=n,c=r;this.attached[s].handlers.forEach(function(e,t){o||l!=t.name||u!=t.selector||c!=t.callback||(o=t)}),o&&(a?this.attached[s].handlers.set(o,!1):(this.attached[s].handlers.delete(o),this.attached[s].data.delete(o)))}},hasHandlers:function(e){return!(!this.attached.hasOwnProperty(e)||!this.attached[e].handlers.size)}})}(bglib),function(o){var s=!1,l=!1,u=("complete"===document.readyState?s=!0:o.EventUtil.addHandler(window,"load",function(e){s=!0}),o.fn.documentReady(function(e){l=!0}),o.EventManager),c=o.Event,e=u.extend({isDocument:void 0,isWindow:void 0,init:function(){u.prototype.init.apply(this,arguments),this.isWindow=this.target===window,this.isDocument=this.target===document},on:function(){var r=this,e=this.resolveArguments("on",arguments),t=e[0],n=(e[1],e[2]),a=e[3],i=" "+t+" ",i=(this.isWindow&&s&&-1!==i.indexOf(" load ")&&(a(new c("load",{target:r.target},n)),t=(" "+t+" ").replace(" load ","")),this.isDocument&&l&&-1!==i.indexOf(" ready ")&&(a(new c("ready",{target:r.target},n)),t=(" "+t+" ").replace(" ready ",""))," "+t+" ");this.isDocument&&-1!==i.indexOf(" ready ")&&(o.fn.documentReady(function(e,t,n){t(new c("ready",{target:r.target},e,n))}.bind(r,n,a)),t=(" "+t+" ").replace(" ready ","")),e[0]=t,u.prototype.on.apply(this,e)}});o.DomEvents={window:new e(window),document:new e(document)}}(bglib),function(e){function t(){this.storage=new WeakMap}t.prototype.set=function(e,t,n){this.storage.has(e)||this.storage.set(e,new Map),this.storage.get(e).set(t,n)},t.prototype.get=function(e,t){return this.has(e,t)?this.storage.get(e).get(t):void 0},t.prototype.has=function(e,t){return!!this.hasBase(e)&&this.storage.get(e).has(t)},t.prototype.hasBase=function(e){return this.storage.has(e)},t.prototype.remove=function(e,t){var n=!1;return this.has(e,t)&&(n=this.storage.get(e).delete(t)),this.hasBase(e)&&0===this.storage.get(e).size&&this.storage.delete(e),n},t.prototype.reset=function(e){this.hasBase(e)&&this.storage.delete(e)},e.ElementalData=t}(bglib),function(o){var n=o.EventManager,r=new o.ElementalData,a=new WeakMap,s={getAttributes:function(e){var t={};if(e=s.element(e))for(var n=0,r=e.attributes,a=r.length;n<a;n++)t[r[n].nodeName]=r[n].value;return t},text:function(e){return e?e.innerText||e.textContent:""},addClass:function(e,t){s.hasClass(e,t)||(""!=e.className&&(t=" "+t),e.className=e.className.trim()+" "+t.trim())},removeClass:function(e,t){var n;s.hasClass(e,t)&&(t=" "+t+" ",n=(n=(" "+e.className+" ").replace(/[\n\t\r]/g," ")).replace(t,""),e.className=n.trim())},toggleClass:function(e,t){s.hasClass(e,t)?s.removeClass(e,t):s.addClass(e,t)},hasClass:function(e,t){return t=" "+t+" ",-1<(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(t)},css:function(e,t,n){if(void 0===n){var r,a,i=window.navigator.userAgent.toLowerCase();if(/msie|opera/.test(i)?r=e.currentStyle:/gecko/.test(i)&&(r=document.defaultView.getComputedStyle(e,null)),!o.DT.isObject(t))return(null!=r[t]?r:e.style)[t];for(a in t)t.hasOwnProperty(a)&&s.css(e,a,t[a])}else t&&(e.style[t]=n)},data:function(e,t,n){if(!(2<arguments.length))return s.data.get(e,t);s.data.set(e,t,n)}};s.data.get=function(e,t){return r.get(e,t)},s.data.set=function(e,t,n){r.set(e,t,n)},s.data.has=function(e,t){return r.has(e,t)},s.data.remove=function(e,t){r.remove(e,t)},s.element=function(e){e=s.elements(e);return e.length?e[0]:null},s.elements=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];o.DT.isString(n)?n=[n]:jQuery&&n instanceof jQuery||o.jLyte&&n instanceof o.jLyte?n=n.toArray():n instanceof NodeList?n=[].slice.call(n):n instanceof DocumentFragment?n=n.childNodes:o.DT.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)o.DT.isString(n[r])?e=e.concat(s.resolveElements(n[r])):jQuery&&n[r]instanceof jQuery||o.jLyte&&n[r]instanceof o.jLyte?e=e.concat(n[r].toArray()):o.DT.isArray(n[r])?e.concat(n[r]):e.push(n[r])}return e},s.resolveElements=function(e){var t,n,r;return(e=e.trim())&&""!=e?(t=[],t=(n=e.match(/^(?:(<[\w\W]+>)|\#([\w-]+)|\.([\w-]+))$/))?n[1]?(n=e.match(/^(<\s*(thead|tbody|tfoot|tr|td|th)[^>]*>)(.*)<\s*\/\s*(thead|tbody|tfoot|tr|td|th)\s*>$/))?n[2]==n[4]?(r="table","tr"==n[2]?r="thead":-1!==["td","th"].indexOf(n[2])&&(r="tr"),(r=document.createElement(r)).innerHTML=e,r.childNodes):[document.createTextNode(e)]:document.createRange().createContextualFragment(e).childNodes:n[2]?(r=document.getElementById(n[2]))?[r]:[]:document.querySelectorAll("."+n[3]):(n=e.replace(/[\s,{]+$/gm,"").concat(" {").match(/([^\r\n,{}]+)(\s?,(?=[^}]*{)|\s*{)/))&&!e.match(/^(text\#|txt\#)/)?document.querySelectorAll(e.replace(/[\s,{]+$/gm,"")):(e=e.replace(/^(text\#|txt\#)/,""),[document.createTextNode(e)]),[].slice.call(t)):[]},s.offset=function(e){var e=e.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+n,left:e.left+t}},s.remove=function(e){if(e instanceof Element)e.parentElement.removeChild(e);else if(e instanceof NodeList||e instanceof HTMLCollection||o.DT.isArray(e))for(var t=e.length-1;0<=t;t--)e[t]&&e[t].parentElement&&e[t].parentElement.removeChild(e[t])},s.on=function(){var e=[].slice.call(arguments),t=e.shift();t&&(a.has(t)||a.set(t,new n(t)),t=a.get(t),n.prototype.on.apply(t,e))},s.off=function(){var e=[].slice.call(arguments),t=e.shift();t&&a.has(t)&&(t=a.get(t),n.prototype.off.apply(t,e))},o.El=s}(bglib),bglib.TagLoader={getJson:function(e){return JSON.safeParse(this.getText(e))},setJson:function(e,t,n){this.setText(e,JSON.stringify(t),n)},getText:function(e){var t=null;return void 0!==jQuery&&e instanceof jQuery?t=e.text()||e.html():isObject(e)?t=e.innerHTML:null!==(e=document.getElementById(e.replace(/^#/,"")))&&(t=e.innerText),this.removeWrap(t)},setText:function(e,t,n){var r;t=this.applyWrap(t),void 0!==jQuery&&e instanceof jQuery?e.html(t):isObject(e)||(r=e,null!==(e=document.getElementById(e.replace(/^#/,""))))?e.innerHTML=t:((e=document.createElement("script")).type="application/json",e.id=r.replace(/^#/,""),e.innerHTML=t,(n=n||document.body).appendChild(e))},applyWrap:function(e){return"\x3c!--"+e.trim()+"--\x3e"},removeWrap:function(e){return"string"==typeof e?e.trim().replace(/(\r\n|\n|\r)/gm," ").replace(/\t+/gm," ").replace(/^<\!\-\-(.+)\-\->$/,"$1"):null}},function(i){var o=i.TagLoader;i.Storage=function(){function a(){return Math.floor((new Date).getTime()/1e3)}function e(e){this.storage=e}function t(){this.instanceClass=this.itemClass+"_"+i.fn.rand(),this.itemIndex={}}var n={};e.prototype={supported:function(){return!!this.storage},set:function(e,t,n){this.supported()&&(t=JSON.stringify(t),this.storage.setItem(e,t),n)&&this.storage.setItem(e+"_exp",a()+n)},get:function(e){return this.supported()?this.storage.getItem(e+"_exp")&&a()>=parseInt(this.storage.getItem(e+"_exp"))?(this.storage.getItem(e)&&this.storage.removeItem(e),this.storage.removeItem(e+"_exp"),null):JSON.parse(this.storage.getItem(e)):null},remove:function(e){this.supported()&&(this.storage.removeItem(e),this.storage.removeItem(e+"_exp"))},clear:function(){this.supported()&&this.storage.clear()},length:function(){if(this.supported()){var e,t=0;for(e in localStorage)e.endsWith("_exp")||t++;return t}return 0},totalLength:function(){if(this.supported()){var e,t=0;for(e in localStorage)t++;return t}return 0}};return t.prototype={itemClass:"appStorageItem",parent:void 0,supported:function(){return!(void 0===o||!o)},set:function(e,t,n){var r;this.supported()&&(this.itemIndex[e]||(this.itemIndex[e]="#"+this.itemClass+"_"+i.fn.rand()),this.parent||((r=document.createElement("div")).id=this.instanceClass,r.style.display="none",this.parent=r,document.body.appendChild(r)),o.setJson(this.itemIndex[e],t,this.parent),r=document.getElementById(this.itemIndex[e].replace(/^#/,"")),i.El.addClass(r,this.itemClass),i.El.addClass(r,this.instanceClass),n)&&r.setAttribute("data-exp",a()+n)},get:function(e){var t;if(this.supported()&&this.itemIndex[e])return(t=document.getElementById(this.itemIndex[e].replace(/^#/,"")))?t.getAttribute("data-exp")&&a()>=parseInt(t.getAttribute("data-exp"))?(i.El.remove(t),delete this.itemIndex[e],null):o.getJson(t):null},remove:function(e){var t;this.supported()&&this.itemIndex[e]&&(t=document.getElementById(this.itemIndex[e].replace(/^#/,"")))&&(i.El.remove(t),delete this.itemIndex[e])},clear:function(){var e;this.supported()&&0<(e=document.getElementsByClassName(this.instanceClass)).length&&(i.El.remove(e),this.itemIndex={})},length:function(){return this.supported()?document.getElementsByClassName(this.instanceClass).length:0},totalLength:function(){return this.supported()?document.getElementsByClassName(this.itemClass).length:0}},n.local=new e(window.localStorage),n.session=new e(window.sessionStorage),n.page=new t,n}}(bglib),bglib.Timeout=function(e){function t(){i=0}function n(){o&&r<=++i&&(o=!1,a())}var r=(e=void 0===e?{}:e).time||1800,a=e.callback||function(){alert("Session Expired"),location.reload()},i=0,o=e.autostart||!0;return void 0!==e.manualHandlers&&e.manualHandlers||(document.onclick=t,document.onmousemove=t,document.onkeypress=t),window.setInterval(n,1e3),{expTime:r,isRunning:function(){return o},restart:function(){o=!(i=0)},stop:function(){i=0,o=!1},counter:{get:function(){return i},reset:t},check:n,triggerCallback:function(){a()}}},bglib.UrlParser={regexes:{scheme:/^([a-zA-Z0-9]+):\/\/|^\/\//,username_password:/^([a-zA-Z0-9_-]+)?:([a-zA-Z0-9_-]+)?@/,host:/^((?:(?:[a-zA-Z0-9_-]+)\.)+(?:[a-zA-Z0-9_-]+){1})/,port:/^(?::([0-9]+))/,path:/^((?!\/\/)(?:\/|\.\/|\.\.\/)(?:[^?#]+)?)/,query:/^(?:\?([^#]+)*)/,fragment:/^(?:#(.+)*)/},parse:function(e,t){t=void 0!==t?t:"";var n=e,r=this.urlParts(),a={};for(l in r.url=e,this.regexes)if(this.regexes.hasOwnProperty(l)){var i=n.match(this.regexes[l]);if(a[l]=!1,i){a[l]=!0;for(var o=l.split("_"),n=n.substring(i[0].length,n.length),s=0;s<o.length;s++)void 0!==i[s+1]&&(r[o[s]]=i[s+1])}}var l,u=!1;for(l in r)r.hasOwnProperty(l)&&""!=r[l]&&(u=!0);if(""==r.host&&a.scheme?u=!1:""==r.host?(""==r.path||""!=r.scheme||""!=r.username||""!=r.password||r.host||r.port)&&(u=!1):""==r.path&&(r.path=t),u){""!=r.host&&(2<(e=r.host.split(".")).length?(r.domain=e[e.length-2]+"."+e[e.length-1],e.pop(),e.pop(),r.subdomain=e.join(".")):r.domain=r.host);t=r.path.replace(/^\/+|\/+$/g,"");if(""!=t?r.pathParts=t.split("/"):""!=r.path&&(r.pathParts=["/"]),r.queryString=r.path+(""!=r.query?"?"+r.query:""),""!=r.query)for(var c=r.query.split("&"),s=0;s<c.length;s++){var d=c[s].split("=");d.length<2&&d.push(""),r.queryVariables[d[0]]=decodeURIComponent(d[1])}return r}return null},build:function(e){e=this.cloneObject(e);return void 0===e.scheme&&(e.scheme=""),void 0===e.username&&(e.username=""),void 0===e.password&&(e.password=""),void 0===e.subdomain&&(e.subdomain=""),void 0===e.domain&&(e.domain=""),void 0===e.host&&(e.host=""),void 0===e.port&&(e.port=""),void 0===e.path&&(e.path=""),void 0===e.query&&(e.query=""),void 0===e.fragment&&(e.fragment=""),""!=e.scheme&&(e.scheme=e.scheme+"://"),""==e.host&&(""!=e.subdomain&&""!=e.domain?e.host=e.subdomain+"."+e.domain:""!=e.domain&&(e.host=e.domain)),(e.auth="")==e.username&&""==e.password||(e.auth=e.username+":"+e.password+"@"),""!=e.port&&(e.port=":"+e.pprt),""!=e.query&&(e.query="?"+e.query),""!=e.fragment&&(e.fragment="#"+e.fragment),e.path.match(/^\./)&&""!=e.host&&(e.path="/"+e.path),e.host?e.scheme+e.auth+e.host+e.port+e.path+e.query+e.fragment:(""==e.path&&(e.path="/"),e.path+e.query+e.fragment)},urlParts:function(){return{url:"",scheme:"",username:"",password:"",subdomain:"",domain:"",host:"",port:"",path:"",query:"",fragment:"",queryString:"",pathParts:[],queryVariables:{}}},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t,n=e.constructor();for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}},bglib.UserAutoExpire=bglib.extend({el:void 0,modelId:void 0,modelTimer:void 0,keepAliveTimer:void 0,exp:void 0,warningDuration:void 0,warningTimeout:void 0,expireUrl:void 0,renewUrl:void 0,init:function(e){var t=this;e=e||{},e=Object.deepCopyMerge({exp:1800,warningDuration:60,expireUrl:"/logout",renewUrl:"/api/keep-session-alive"},e),t.exp=e.exp,t.warningDuration=e.warningDuration,t.expireUrl=e.expireUrl,t.renewUrl=e.renewUrl,t.el={model:void 0,timer:void 0},t.modelId="userAutoExpire"+bglib.fn.rand(),t.el.model=t.attachModel(t.modelId),t.el.timer=t.el.model.querySelector("#"+t.modelId+"_timer"),bglib.EventUtil.addHandler(t.el.model.querySelector(".userAutoExpire_End"),"click",function(){t.endSession()}),bglib.EventUtil.addHandler(t.el.model.querySelector(".userAutoExpire_Keep"),"click",function(){t.continueSession()}),t.warningTimeout=new bglib.Timeout({time:t.exp-t.warningDuration,callback:function(){t.promtUser()}}),t.keepAliveTimer=setInterval(function(){t.keepAliveHandler()},1e3*parseInt(t.exp/3))},promtUser:function(){var e=this;this.el.timer.innerHTML=this.warningDuration+"s",this.revealModel(),this.modelTimer=setInterval(function(){e.countdownTimer()},1e3)},countdownTimer:function(){var e=parseInt(this.el.timer.innerHTML.replace("s",""));0<e?this.el.timer.innerHTML=e-1+"s":this.endSession()},endSession:function(){this.hideModel(),clearInterval(this.modelTimer),window.location=this.expireUrl},continueSession:function(){this.hideModel(),this.el.timer.innerHTML="--",clearInterval(this.modelTimer),this.modelTimer=null,this.warningTimeout.restart()},keepAliveHandler:function(){bglib.fn.request(this.renewUrl)},hideModel:function(){bglib.El.removeClass(this.el.model,"opened"),bglib.El.addClass(this.el.model,"closed")},revealModel:function(){bglib.El.removeClass(this.el.model,"closed"),bglib.El.addClass(this.el.model,"opened")},attachModel:function(e){var t=document.createElement("style"),t=(t.type="text/css",t.innerHTML=".userAutoExpire_container {position: fixed;top: 0;left: 0;right: 0;bottom: 0;background-color: rgba(0, 0, 0, 0.20);z-index: 10000;}.userAutoExpire_container.closed {display: none;}.userAutoExpire_container p {margin: 0;margin-bottom: 2rem;}.userAutoExpire_container p:last-child {margin: 0;}.userAutoExpire_wrap {height: 100%;}.userAutoExpire {width: 300px;background: #e9e9e9;position: relative;top: 50%;transform: translateY(-50%);margin: 0 auto;padding: 1rem;box-shadow:0 4px 5px 0 rgba(0,0,0,0.14),0 1px 10px 0 rgba(0,0,0,0.12),0 2px 4px -1px rgba(0,0,0,0.3);}.userAutoExpire_button {-webkit-appearance: none;-moz-appearance: none;line-height: 1;display: inline-block;text-align: center;cursor: pointer;transition: background-color 0.25s ease-out, color 0.25s ease-out;vertical-align: middle;border: 1px solid #222;border-radius: 0;padding: 0.8em 1em 0.7695em 1em;margin: 0;font-size: 0.9rem;background-color: #e9e9e9;color: #222;}.userAutoExpire_End {border-color: transparent;}.userAutoExpire_button:hover, .userAutoExpire_button:focus {text-decoration: underline;}.userAutoExpire_Keep:hover, .userAutoExpire_Keep:focus {color: #e9e9e9;background-color: #222;text-decoration: none;}.userAutoExpire_links {text-align: right;}",document.querySelector("head").appendChild(t),document.querySelector("body")),e=bglib.El.element('<div id="'+e+'_container" class="userAutoExpire_container closed" style="">\t<div id="'+e+'_wrap" class="userAutoExpire_wrap">\t\t<div id="'+e+'" class="userAutoExpire">\t\t\t<div id="'+e+'_content" class="userAutoExpire_content">\t\t\t\t<p class="userAutoExpire_message">Session will expire in:&nbsp;<span id="'+e+'_timer" class="userAutoExpire_timer">--</span></p>\t\t\t\t<p class="userAutoExpire_links"><button class="userAutoExpire_button userAutoExpire_End">End Now</button>&nbsp;&nbsp;<button class="userAutoExpire_button userAutoExpire_Keep">Keep Alive</button></p>\t\t\t</div>\t\t</div>\t</div></div>');return t.appendChild(e),e}}),function(e){var i={hasAsked:void 0,hasGranted:void 0,hasDenied:void 0},o={supported:function(){return"Notification"in window},hasAsked:function(){return i.hasAsked},hasGranted:function(){return i.hasGranted},hasDenied:function(){return i.hasDenied},notify:function(t,n){var e,r=(n=n||{}).autoClose||!1,a=n.autoCloseTime||5e3;delete n.autoClose,delete n.autoCloseTime,i.hasGranted?(e=new Notification(t,n),r&&setTimeout(e.close.bind(e),a)):i.hasAsked||o.request(function(e){e&&(e=new Notification(t,n),r)&&setTimeout(e.close.bind(e),a)})},request:function(t){t=t||function(){},Notification.requestPermission(function(e){i.hasAsked=!0,"granted"==e?(i.hasGranted=!0,t(!0)):(i.hasDenied=!0,t(!1))})}};o.supported()&&(i.hasGranted="granted"===Notification.permission,i.hasDenied="denied"===Notification.permission,i.hasAsked="denied"!==Notification.permission&&"granted"!==Notification.permission),e.Webify=o}(bglib),bglib});